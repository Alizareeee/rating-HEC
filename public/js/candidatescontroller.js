!function(){"use strict";var a=function(a,b,c,d,e,f,g,h){var i=0;a.msgs={},a.deactiveUpdateButton=!0,a.animationsEnabled=!0,a.changeLanguage=function(a){h.changeLanguage(a)};var j=function(){c.get().success(function(b){a.candidateList=b,a.candidateImage=[];for(var c=0;c<b.length;c++)b[c].imageName&&b[c].imageName.length?a.candidateImage[c]="https://s3.amazonaws.com/mostafa-1/"+b[c].imageName:a.candidateImage[c]="http://lorempixel.com/150/150/fashion/"}).error(function(){console.log("Sorry, can not reach the server")})};j(),a.addCandide=function(){if(a.newCandidateName&&a.newCandidateName.length>0){for(var b=0;b<a.candidateList.length;b++)if(a.candidateList[b].name===a.newCandidateName)return a.msgs.newCandidateRepeatError=!0,d(function(){a.msgs.newCandidateRepeatError=!1},2e3),void(a.newCandidateName="");var e={};e.name=a.newCandidateName,e.overAllRate=0,e.subrates={item1:0,item2:0,item3:0,item4:0},e.imageName="",e.totalVote=0,c.post(e).success(function(b){j(),a.newCandidateName="",a.msgs.newCandidatesuccess=!0,d(function(){a.msgs.newCandidatesuccess=!1},2e3)}).error(function(b){console.log("Sorry, something wrong happened when adding a new candide"),a.msgs.newCandidateError=!0,d(function(){a.msgs.newCandidateError=!1},2e3)})}else a.msgs.updateCandidateError2=!0,d(function(){a.msgs.updateCandidateError2=!1},2e3)},a.removeCandide=function(b,f){var g={closeButtonText:"Cancel",actionButtonText:"Delete Candidate",headerText:"Delete",bodyText:"Are you sure you want to delete this candidate?"};e.showModal({},g).then(function(e){return a.candidateList&&a.candidateList.length>1?void c["delete"](b).success(function(b){j(),a.msgs.deleteCandidatesuccess=!0,d(function(){a.msgs.deleteCandidatesuccess=!1},2e3)}).error(function(b){console.log("Sorry, something wrong happened when deleting a new candide"),a.msgs.newCandidateError=!0,d(function(){a.msgs.newCandidateError=!1},2e3)}):!1})},a.editCandide=function(b){a.deactiveUpdateButton=!1,a.newCandidateName=a.candidateList[b].name,i=b},a.update=function(){a.newCandidateName&&a.newCandidateName.length?(a.candidateList[i].name=a.newCandidateName,c.put(a.candidateList[i]._id,{name:a.candidateList[i].name}).success(function(){j(),a.msgs.updateCandidatesuccess=!0,d(function(){a.msgs.updateCandidatesuccess=!1},2e3),a.deactiveUpdateButton=!0}).error(function(){a.msgs.updateCandidateError=!0,d(function(){a.msgs.updateCandidateError=!1},2e3)})):(a.msgs.updateCandidateError2=!0,d(function(){a.msgs.updateCandidateError2=!1},2e3))},a.hoveringOver=function(b){a.overStar=b,a.percent=100*(b/7)},a.ratingStates=[{stateOn:"glyphicon-ok-sign",stateOff:"glyphicon-ok-circle"},{stateOn:"glyphicon-star",stateOff:"glyphicon-star-empty"},{stateOn:"glyphicon-heart",stateOff:"glyphicon-ban-circle"},{stateOn:"glyphicon-heart"},{stateOff:"glyphicon-off"}],a.goToTop=function(){return angular.element($("html,body")).animate({scrollTop:0},"slow"),!1},angular.element($(window)).height()+100<angular.element($(document)).height()&&angular.element($("#back-to-top")).removeClass("hidden").affix({offset:{top:100}})};a.$inject=["$scope","$http","candidatesFactory","$timeout","modalService","$location","$anchorScroll","languageFactory"],angular.module("ratingApp").controller("candidatescontroller",a)}();